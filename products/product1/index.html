<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>کیف نمونه — نمایش سه‌بعدی</title>
  <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.0.1/model-viewer.min.js"></script>

  <!-- CSS داخلی -->
  <style>
    * { box-sizing: border-box; }
    body { font-family: Tahoma, Arial, "Noto Sans", sans-serif; margin:0; background:#fafafa; color:#222; }
    .product-header { padding:16px; display:flex; gap:12px; align-items:center; }
    .product-header .back { text-decoration:none; color:#333; padding:6px 10px; border-radius:6px; background:#fff; box-shadow:0 1px 3px rgba(0,0,0,0.04); }
    .container { max-width:1100px; margin:28px auto; padding:0 16px; }
    .product-page { display:grid; grid-template-columns: 1fr 360px; gap:20px; align-items:start; }
    .viewer-wrapper { background:#fff; padding:8px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.06); }
    .product-info { background:#fff; padding:16px; border-radius:8px; box-shadow:0 6px 18px rgba(0,0,0,0.06); }
    .actions { margin-top:12px; display:flex; gap:8px; }
    .button, button { background:#1976d2; color:#fff; border:none; padding:10px 12px; border-radius:8px; text-decoration:none; cursor:pointer; }
    button { font-size:14px; }
    .site-footer { text-align:center; padding:16px; color:#666; font-size:14px; }

    /* Thumbnail دایره‌ای */
    .design-thumbnails { display:flex; gap:12px; margin-top:16px; }
    .thumb { width:60px; height:60px; border-radius:50%; overflow:hidden; cursor:pointer; border:2px solid #ddd; transition:border-color 0.2s; }
    .thumb:hover, .thumb.active { border-color:#1976d2; }
    .thumb img { width:100%; height:100%; object-fit:cover; }

    @media (max-width:900px) {
      .product-page { grid-template-columns: 1fr; }
      model-viewer { height:480px !important; }
    }
  </style>
</head>

<body>
  <header class="product-header">
    <a class="back" href="/3d/index.html">&larr; بازگشت به گالری</a>
    <h1>کیف نمونه</h1>
  </header>

  <main class="container product-page">
    <div class="viewer-wrapper">
      <model-viewer 
        id="mv" 
        src="/3d/models/product1_design1.glb" 
        alt="محصول سه‌بعدی" 
        camera-controls 
        auto-rotate 
        ar 
        ar-modes="webxr scene-viewer quick-look" 
        exposure="1" 
        shadow-intensity="1" 
        style="width:100%; height:640px;">
      </model-viewer>

      <!-- Thumbnail ها -->
      <div class="design-thumbnails">
        <div class="thumb active" data-model="/3d/models/product1_design1.glb">
          <img src="/3d/images/design1.jpg" alt="طرح 1">
        </div>
        <div class="thumb" data-model="/3d/models/product1_design2.glb">
          <img src="/3d/images/design2.jpg" alt="طرح 2">
        </div>
        <div class="thumb" data-model="/3d/models/product1_design3.glb">
          <img src="/3d/images/design3.jpg" alt="طرح 3">
        </div>
        <div class="thumb" data-model="/3d/models/product1_design4.glb">
          <img src="/3d/images/design4.jpg" alt="طرح 4">
        </div>
      </div>
    </div>

    <div class="product-info">
      <h2>توضیحات محصول</h2>
      <p>....</p>

      <div class="actions">
        <button id="copyLink">کپی لینک نمایش برای مشتری</button>
        <a id="downloadModel" class="button" href="/3d/models/product1_design1.glb" download>دانلود مدل (.glb)</a>
      </div>
    </div>
  </main>

  <script>
    // تغییر مدل و لینک دانلود با کلیک روی Thumbnail
    const thumbnails = document.querySelectorAll('.thumb');
    const modelViewer = document.querySelector('model-viewer');
    const downloadLink = document.getElementById('downloadModel');

    thumbnails.forEach(thumb => {
      thumb.addEventListener('click', () => {
        const newModel = thumb.getAttribute('data-model');
        modelViewer.setAttribute('src', newModel);
        downloadLink.setAttribute('href', newModel);

        thumbnails.forEach(t => t.classList.remove('active'));
        thumb.classList.add('active');
      });
    });

    // کپی لینک صفحه
    document.getElementById('copyLink').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(window.location.href);
        alert('لینک صفحه کپی شد: ' + window.location.href);
      } catch (e) {
        prompt('کپی خودکار پشتیبانی نمی‌شود؛ لطفاً این آدرس را کپی کنید:', window.location.href);
      }
    });
  </script>

  <footer class="site-footer">
    <p>برای مشاهده در AR، از موبایل و مرورگرهای پشتیبان استفاده کنید.</p>
  </footer>
</body>
</html>
